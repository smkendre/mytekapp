<app-topbar></app-topbar>
<ion-content >


  <ion-row>
    <ion-col size="12">
      <div class="ion-text-center"  *ngIf="isLoading">
        <ion-spinner color="primary"></ion-spinner>

      </div>
      <div class="ion-text-center" *ngIf="!isLoading && Fields.length <= 0">

      <p > No Report Format Found !</p>
      </div>
    </ion-col>
  </ion-row>
  <ion-grid class="ion-no-padding"  *ngIf="!isLoading && Fields.length > 0">

<form [formGroup]="form" (ngSubmit)="onSubmit()">

    <ion-card class="transparent-card">
      <ion-card-header>            <h2>Upate Daily Report</h2>
      </ion-card-header>
      <ion-card-content>
        <ion-row *ngFor="let row of Fields">
          <ion-col size="4" class="ion-no-padding">
            <ion-label>{{row.name}}: </ion-label>
          </ion-col>

          <ion-col size="8" class="ion-no-padding">
            <ion-input type="text" name="field_{{row.name}}" required value="" ></ion-input>
          </ion-col>
        </ion-row>

        <ion-row >
          <ion-col size="12" class="ion-no-padding">
            <ion-label>Comment: </ion-label>
            <ion-textarea rows="5" required formControlName="comment"></ion-textarea>
            <div class="errorMsg">
              <ng-container *ngFor="let error of error_messages.comment">
                <div class="errorMsg" *ngIf="form.get('comment').hasError(error.type) && (form.get('comment').dirty || form.get('comment').touched)">
                  {{ error.message }}
                </div>
              </ng-container>
            </div>
          </ion-col>

        </ion-row>

        <ion-row >
          <ion-col size="12" >
            <img [src]="imageUrl" height="30px" *ngIf="imageUrl">

          </ion-col>
          <ion-col size="12" class="ion-no-padding">

              <ion-button (click)="selectImageSource('file')">
        Upload      </ion-button>
          </ion-col>
          <ion-col size="12" class="ion-no-padding ion-text-center">


            <ion-input type="hidden"  formControlName="tender_id" value="{{tender_id}}" ></ion-input>
            <ion-input type="hidden" formControlName="file_path" value="{{imageUrl}}" ></ion-input>


            <ion-button type="submit" class="ion-text-center" [disabled]="!form.valid">Submit</ion-button>
          </ion-col>
        </ion-row>


      </ion-card-content>
    </ion-card>


  </form>

  </ion-grid>
</ion-content>
<app-footer></app-footer>
